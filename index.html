function createNote(text) {
    const noteDiv = document.createElement('div');
    noteDiv.className = 'note';

    const delBtn = document.createElement('span');
    delBtn.className = 'delete-btn';
    delBtn.textContent = '×';
    delBtn.onclick = () => noteDiv.remove();
    noteDiv.appendChild(delBtn);

    // YouTube正規表現
    const ytRegex = /(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([\w-]+)/;
    const shortYtRegex = /(?:https?:\/\/)?youtu\.be\/([\w-]+)/;

    let youtubeId = null;
    if (ytRegex.test(text)) youtubeId = text.match(ytRegex)[1];
    else if (shortYtRegex.test(text)) youtubeId = text.match(shortYtRegex)[1];

    if (youtubeId) {
        const iframe = document.createElement('iframe');
        iframe.src = `https://www.youtube.com/embed/${youtubeId}`;
        iframe.frameBorder = 0;
        iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
        iframe.allowFullscreen = true;
        noteDiv.appendChild(iframe);
    } else if (text.match(/\.(jpeg|jpg|gif|png)(\?.*)?$/i)) {
        const img = document.createElement('img');
        img.src = text;
        noteDiv.appendChild(img);
    } else {
        const p = document.createElement('p');
        p.textContent = text;
        noteDiv.appendChild(p);
    }

    document.getElementById('notes').prepend(noteDiv);
}
